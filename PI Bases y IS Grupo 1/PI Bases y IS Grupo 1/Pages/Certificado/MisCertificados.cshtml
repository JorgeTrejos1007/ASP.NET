@page
@model PIBasesISGrupo1.Pages.Certificado.MisCertificadosModel
@{
    ViewData["Title"] = "Mis Certificado";
    var email = (string)ViewData["email"];
    var certificados = (List<PIBasesISGrupo1.Models.Certificado>)ViewData["Certificados"];
     
}
<head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js">
    </script>
    <script src="https://files.codepedia.info/files/uploads/iScripts/html2canvas.js">
    </script>
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Abhaya+Libre:wght@400;800&family=Source+Serif+Pro:ital,wght@0,400;0,900;1,400&display=swap" rel="stylesheet">
    <style>
        .certificado__container {
            font-family: 'Abhaya Libre', serif;
        }

        .certifica {
            text-align: center;
        }
    </style>
</head>

@foreach (var certificado in certificados)
{

<div class="certificado__container" id="certificado">
     
    <div class="certificado__elements">
        <br />
        <img class="logo-2" src="/img/logo.png" alt="">
        <br />
        <br />
        <p class="certificado__content-title">Certificado de Finalización</p>
        <br />
        <div style="display:inline-block">
            <p class="certificado__ownerName">@certificado.nombreEstudiante</p>
            <p class="certificado__members__line" style="margin-bottom:15px;"></p>
        </div>
        <p class="certificado__content">A completado con exito el curso de</p>
        <br />
        <p class="certificado__content-courseName">@certificado.nombreCurso</p>
        <p class="certificado__content">Impartido por:</p>
        <p class="certificado__content-teacher">@certificado.nombreEducador</p>
        <p class="certificado__content">En la fecha:</p>
        <p class="certificado__content-date">
            @certificado.fecha.Substring(0, 2)-@certificado.fecha.Substring(3, 2)-@certificado.fecha.Substring(6, 4)
        </p>
        <div class="certificado__members">
            <div>
                <img src="data:image/png;base64,@(Convert.ToBase64String(certificado.firmaCoordinador))" style="width:200px;height:100px" />
                <p class="certificado__members__line"></p>
                <p class="certificado__members__information">Firma coordinador</p>
            </div>

            <div>
                <img src="data:image/png;base64,@(Convert.ToBase64String(certificado.firmaEducador))" style="width:200px;height:100px" />
                <p class="certificado__members__line"></p>
                <p class="certificado__members__information">Firma Educador</p>
            </div>
        </div>
        <br />
    </div>
</div>
            <button type="submit" onclick="html2canvas" class="primary-btn2 text-uppercase enroll rounded-0" href="#" style="margin-left:45%">Firmar</button>
         
    
    <script>

        html2canvas($('#certificado'), {
            onrendered: function (canvas) {
                var dataURL = canvas.toDataURL();
                document.getElementById("informacionImagen").value = dataURL;
            }
        });

    </script>
}